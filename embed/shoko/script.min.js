
  async function init() {
    const video = document.querySelector("#video");
    const currentLocation = window.location.search;
    const sURL = currentLocation.replace("?live&url=", "");
    const ui = video["ui"];
    const controls = ui.getControls();
    const player = controls.getPlayer();
/*    
    player.configure({
      drm: {
        servers: {
          "com.widevine.alpha": "//mrpw.ptmnc01.verspective.net/?deviceId=YzM0NDA0MTItMGYyMC0zNGQ0LTliMjMtNDY4MjE1ZjA5NmZj"
        }
      }
    });
*/
player.configure({
    drm: QWERTYUIOP
  });

    window.player = player;
    window.ui = ui;
    player.addEventListener("error", onPlayerErrorEvent);
    controls.addEventListener("error", onUIErrorEvent);
    try {
      await player.load(sURL);
      console.log("The video has now been loaded!");
    } catch (error) {
      onPlayerError(error);
    }
  }

  function initApp() {
    shaka.polyfill.installAll();
    if (shaka.Player.isBrowserSupported()) {

   init();
    } else {
      console.error('Browser not supported!');
    }
  }

  function onPlayerErrorEvent(errorEvent) {
    onPlayerError(event.detail);
  }

  function onPlayerError(error) {
    console.error("Error code", error.code, "object", error);
  }

  function onUIErrorEvent(errorEvent) {
    onPlayerError(event.detail);
  }

  function initFailed(errorEvent) {
    console.error("Unable to load the UI library!");
  }
  document.addEventListener("shaka-ui-loaded", init);
  document.addEventListener("shaka-ui-load-failed", initFailed);



/*
var source = 'https://bcovlive-a.akamaihd.net/r2d2c4ca5bf57456fb1d16255c1a535c8/eu-west-1/eu-west-1/6058004203001/profile_1/chunklist.m3u8';

async function initPlayer() {
  var video = document.getElementById("video");
  var ui = video.ui;
  var controls = ui.getControls();
  var player = controls.getPlayer();
  window.player = player;
  window.ui = ui;
  player.addEventListener("error", onErrorEvent);
  controls.addEventListener("error", onUIErrorEvent);
  try {
    await player.load(source);

    console.log("The video has now been loaded!");
  } catch (error) {
    onError(error);
  }
}

function initApp() {
  shaka.polyfill.installAll();

  if (shaka.Player.isBrowserSupported()) {
    initPlayer();
  } else {
    console.error("Browser not supported!");
  }
}

function onErrorEvent(event) {
  onError(event.detail);
}

function onError(error) {
  console.error("Error code", error.code, "object", error);
}

function onUIErrorEvent(errorEvent) {
  onPlayerError(event.detail);
}

function initPlayerFailed(errorEvent) {
    console.error("Unable to load the UI library!");
  }
document.addEventListener("shaka-ui-loaded", initPlayer);
document.addEventListener("shaka-ui-load-failed", initPlayerFailed);
document.addEventListener("DOMContentLoaded", initApp);
*/
